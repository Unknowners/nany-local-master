# üîß –†—ñ—à–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º–∏ Alembic –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω—ñ

## üéØ –ü—Ä–æ–±–ª–µ–º–∞
–ù–∞ –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–≤–µ—Ä—ñ –≤—ñ–¥—Å—É—Ç–Ω—ñ –¥–∞–Ω—ñ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥—É —á–µ—Ä–µ–∑ —Ç–µ, —â–æ:
1. **Dev-admin endpoints** –Ω–µ –ø—Ä–∞—Ü—é—é—Ç—å –≤ production —Ä–µ–∂–∏–º—ñ
2. **Alembic –º—ñ–≥—Ä–∞—Ü—ñ—ó** –Ω–µ –∑–∞—Å—Ç–æ—Å–æ–≤—É–≤–∞–ª–∏—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
3. **Seed data** –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞–≤—Å—è

## üìä –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø–æ–∫–∞–∑–∞–ª–∞:

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –õ–æ–∫–∞–ª—å–Ω–æ | –ü—Ä–æ–¥–∞–∫—à–Ω | –ü—Ä–æ–±–ª–µ–º–∞ |
|-----------|----------|----------|----------|
| –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –æ–Ω–±–æ—Ä–¥–∏–Ω–≥—É | 2 | **0** | ‚ùå –í—ñ–¥—Å—É—Ç–Ω—ñ |
| –ö—Ä–æ–∫–∏ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥—É | 16 | **0** | ‚ùå –í—ñ–¥—Å—É—Ç–Ω—ñ |
| –ü–æ–ª—è –æ–Ω–±–æ—Ä–¥–∏–Ω–≥—É | 8 | **0** | ‚ùå –í—ñ–¥—Å—É—Ç–Ω—ñ |
| –ö–∞—Ç–µ–≥–æ—Ä—ñ—ó –¥–æ–≤—ñ–¥–Ω–∏–∫—ñ–≤ | 14 | 6 | ‚ö†Ô∏è –ù–µ–ø–æ–≤–Ω—ñ |
| –ó–Ω–∞—á–µ–Ω–Ω—è –¥–æ–≤—ñ–¥–Ω–∏–∫—ñ–≤ | 48 | 2 | ‚ö†Ô∏è –ù–µ–ø–æ–≤–Ω—ñ |

## ‚úÖ –†—ñ—à–µ–Ω–Ω—è

### 1. –î–æ–¥–∞–Ω–æ admin_init —Ä–æ—É—Ç–µ—Ä
**–§–∞–π–ª**: `app/main.py`
```python
from .routers import auth, admin, onboarding, admin_init
app.include_router(admin_init.router)
```

### 2. –î–æ—Å—Ç—É–ø–Ω—ñ admin endpoints –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω—ñ:
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É –ë–î
GET /api/v1/admin/status

# –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –ë–î (–ø–æ—Ç—Ä–µ–±—É—î —Å–µ–∫—Ä–µ—Ç–Ω–∏–π –∫–ª—é—á)
POST /api/v1/admin/init-database
Headers: X-Init-Secret: your-secret-key
```

## üöÄ –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –¥–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è

### –í–∞—Ä—ñ–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ admin API (–ø—ñ—Å–ª—è –¥–µ–ø–ª–æ—é –∑–º—ñ–Ω)
```bash
# 1. –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ —Å–µ–∫—Ä–µ—Ç–Ω–∏–π –∫–ª—é—á –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–≤–µ—Ä—ñ
export ADMIN_INIT_SECRET="your-secure-secret-key-here"

# 2. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å
curl "https://nany.datavertex.me/api/v1/admin/status"

# 3. –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –ë–î
curl -X POST "https://nany.datavertex.me/api/v1/admin/init-database" \
  -H "X-Init-Secret: your-secure-secret-key-here"
```

### –í–∞—Ä—ñ–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ Docker Compose (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π)
```bash
# –ù–∞ –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–≤–µ—Ä—ñ
docker-compose exec backend alembic upgrade head
docker-compose exec backend python scripts/seed_data_complete.py
```

### –í–∞—Ä—ñ–∞–Ω—Ç 3: –ß–µ—Ä–µ–∑ Makefile
```bash
make prod-migrate
make prod-seed
```

## üîç –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ Alembic –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω—ñ

### –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π Alembic:
```bash
docker-compose exec backend python -c "import alembic; print('‚úÖ Alembic available')"
docker-compose exec backend alembic --version
```

### –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞–Ω –º—ñ–≥—Ä–∞—Ü—ñ–π:
```bash
docker-compose exec backend alembic current
docker-compose exec backend alembic history
```

### –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ñ–∞–π–ª–∏ –º—ñ–≥—Ä–∞—Ü—ñ–π:
```bash
docker-compose exec backend ls -la /app/alembic/versions/
```

## üìã –§–∞–π–ª–∏ –¥–ª—è –¥–µ–ø–ª–æ—é

–ü—ñ—Å–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è `app/main.py` –ø–æ—Ç—Ä—ñ–±–Ω–æ:
1. **–ó—Ä–æ–±–∏—Ç–∏ commit –∑–º—ñ–Ω**
2. **–ó–∞–¥–µ–ø–ª–æ—ó—Ç–∏ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω** (rebuild –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞)
3. **–í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ ADMIN_INIT_SECRET** –≤ –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
4. **–í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ admin API** –¥–ª—è —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó

## üéâ –û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü—ñ—Å–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:
- ‚úÖ **2 –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó** –æ–Ω–±–æ—Ä–¥–∏–Ω–≥—É (parent + nanny)
- ‚úÖ **16 –∫—Ä–æ–∫—ñ–≤** –æ–Ω–±–æ—Ä–¥–∏–Ω–≥—É (7 parent + 9 nanny)
- ‚úÖ **14 –∫–∞—Ç–µ–≥–æ—Ä—ñ–π** –¥–æ–≤—ñ–¥–Ω–∏–∫—ñ–≤
- ‚úÖ **48 –∑–Ω–∞—á–µ–Ω—å** –¥–æ–≤—ñ–¥–Ω–∏–∫—ñ–≤
- ‚úÖ **–§—Ä–æ–Ω—Ç–µ–Ω–¥ –ø—Ä–∞—Ü—é—î** –±–µ–∑ –ø–æ–º–∏–ª–æ–∫ "–¥–∞–Ω—ñ –∫—Ä–æ–∫—É –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ"

## üõ°Ô∏è –ë–µ–∑–ø–µ–∫–∞

Admin endpoints –∑–∞—Ö–∏—â–µ–Ω—ñ —Å–µ–∫—Ä–µ—Ç–Ω–∏–º –∫–ª—é—á–µ–º, —è–∫–∏–π –º–∞—î –±—É—Ç–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π —Ç—ñ–ª—å–∫–∏ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–≤–µ—Ä—ñ –≤ –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞.