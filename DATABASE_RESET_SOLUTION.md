# üîß –†–Ü–®–ï–ù–ù–Ø: –ë–∞–∑–∞ —Å–∫–∏–¥–∞—î—Ç—å—Å—è –ø—Ä–∏ –±—ñ–ª–¥—ñ

## üéØ –ü—Ä–æ–±–ª–µ–º–∞ –∑–Ω–∞–π–¥–µ–Ω–∞!
–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω—ñ —Å–∫–∏–¥–∞—î—Ç—å—Å—è –ø—Ä–∏ –∫–æ–∂–Ω–æ–º—É –±—ñ–ª–¥—ñ —á–µ—Ä–µ–∑ **DELETE –∫–æ–º–∞–Ω–¥–∏** –≤ seed —Ñ–∞–π–ª–∞—Ö.

## üö® –ö–æ—Ä—ñ–Ω—å –ø—Ä–æ–±–ª–µ–º–∏

### –í —Ñ–∞–π–ª—ñ `seed-data/03_onboarding_data.sql`:
```sql
-- ‚ùå –¶–Ü –ö–û–ú–ê–ù–î–ò –í–ò–î–ê–õ–Ø–Æ–¢–¨ –í–°–Ü –î–ê–ù–Ü:
DELETE FROM user_onboarding_data;
DELETE FROM onboarding_fields;
DELETE FROM onboarding_field_groups;  
DELETE FROM onboarding_steps;
DELETE FROM onboarding_configs;
```

### –©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è:
1. **–ü—Ä–∏ –±—ñ–ª–¥—ñ** - seed —Å–∫—Ä–∏–ø—Ç –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è
2. **DELETE –∫–æ–º–∞–Ω–¥–∏** - –≤–∏–¥–∞–ª—è—é—Ç—å –≤—Å—ñ –¥–∞–Ω—ñ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥—É
3. **INSERT –∫–æ–º–∞–Ω–¥–∏** - –¥–æ–¥–∞—é—Ç—å –Ω–æ–≤—ñ –¥–∞–Ω—ñ
4. **–†–µ–∑—É–ª—å—Ç–∞—Ç** - –≤—Ç—Ä–∞—á–∞—é—Ç—å—Å—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫—ñ –¥–∞–Ω—ñ —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

## ‚úÖ –†—ñ—à–µ–Ω–Ω—è –∑–∞—Å—Ç–æ—Å–æ–≤–∞–Ω–æ

### 1. **–°—Ç–≤–æ—Ä–µ–Ω–æ –±–µ–∑–ø–µ—á–Ω—É –≤–µ—Ä—Å—ñ—é seed —Ñ–∞–π–ª—É**
**–§–∞–π–ª**: `seed-data/03_onboarding_data_safe.sql`
- üö´ **–ù–µ–º–∞—î DELETE –∫–æ–º–∞–Ω–¥**
- ‚úÖ **–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î INSERT ... ON CONFLICT**
- ‚úÖ **–ó–±–µ—Ä—ñ–≥–∞—î —ñ—Å–Ω—É—é—á—ñ –¥–∞–Ω—ñ**

### 2. **–û–Ω–æ–≤–ª–µ–Ω–æ seed —Å–∫—Ä–∏–ø—Ç**
**–§–∞–π–ª**: `scripts/seed_data_complete.py`
- –°–ø–æ—á–∞—Ç–∫—É —Å–ø—Ä–æ–±—É—î –±–µ–∑–ø–µ—á–Ω—É –≤–µ—Ä—Å—ñ—é
- Fallback –¥–æ –∑–≤–∏—á–∞–π–Ω–æ—ó –≤–µ—Ä—Å—ñ—ó

### 3. **–ü—Ä–∏–∫–ª–∞–¥ –±–µ–∑–ø–µ—á–Ω–æ—ó –∫–æ–º–∞–Ω–¥–∏**
```sql
-- ‚úÖ –ë–ï–ó–ü–ï–ß–ù–ê –≤–µ—Ä—Å—ñ—è:
INSERT INTO onboarding_configs (id, name, target_role, version, is_active, is_default) VALUES
('550e8400-e29b-41d4-a716-446655440001', '–û–Ω–±–æ—Ä–¥–∏–Ω–≥ –±–∞—Ç—å–∫—ñ–≤', 'parent', 1, true, true)
ON CONFLICT (id) DO UPDATE SET
    name = EXCLUDED.name,
    version = EXCLUDED.version,
    updated_at = NOW();
```

## üöÄ –î–µ–ø–ª–æ–π —Ä—ñ—à–µ–Ω–Ω—è

### 1. **–ó–∞–∫–æ–º—ñ—Ç–∏—Ç–∏ –∑–º—ñ–Ω–∏**
```bash
git add .
git commit -m "Fix database reset issue - use safe seed data without DELETE commands"
git push
```

### 2. **–î–µ–ø–ª–æ–π –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω**
```bash
# –ë–µ–∑–ø–µ—á–Ω–∏–π –¥–µ–ø–ª–æ–π –±–µ–∑ –≤—Ç—Ä–∞—Ç–∏ –¥–∞–Ω–∏—Ö:
docker-compose pull
docker-compose up -d --no-deps backend
```

### 3. **–ó–∞–ø—É—Å—Ç–∏—Ç–∏ –±–µ–∑–ø–µ—á–Ω–∏–π seed**
```bash
docker-compose exec backend python scripts/seed_data_complete.py
```

## üõ°Ô∏è –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ –º–∞–π–±—É—Ç–Ω—ñ—Ö –ø—Ä–æ–±–ª–µ–º

### 1. **–ó–∞–±–æ—Ä–æ–Ω–∏—Ç–∏ –Ω–µ–±–µ–∑–ø–µ—á–Ω—ñ –∫–æ–º–∞–Ω–¥–∏**
```bash
# ‚ùå –ù–ï –í–ò–ö–û–†–ò–°–¢–û–í–£–í–ê–¢–ò –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω—ñ:
docker-compose down -v           # –í–∏–¥–∞–ª—è—î volumes!
docker volume prune             # –í–∏–¥–∞–ª—è—î volumes!
docker system prune --volumes   # –í–∏–¥–∞–ª—è—î volumes!

# ‚úÖ –ë–ï–ó–ü–ï–ß–ù–Ü –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∏:
docker-compose down             # –ó–±–µ—Ä—ñ–≥–∞—î volumes
docker-compose restart         # –ë–µ–∑–ø–µ—á–Ω–∏–π —Ä–µ—Å—Ç–∞—Ä—Ç
docker-compose up -d --no-deps backend  # –û–Ω–æ–≤–∏—Ç–∏ —Ç—ñ–ª—å–∫–∏ backend
```

### 2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ backups**
```bash
# –î–æ–¥–∞—Ç–∏ –≤ CI/CD pipeline:
# –ü–µ—Ä–µ–¥ –∫–æ–∂–Ω–∏–º –¥–µ–ø–ª–æ—î–º:
docker-compose exec postgres pg_dump -U app nanny_match_prod > backup_pre_deploy.sql
```

### 3. **–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –¥–∞–Ω–∏—Ö**
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—ñ—Å–ª—è –¥–µ–ø–ª–æ—é:
curl "https://nany.datavertex.me/api/v1/onboarding_configs" | jq '. | length'
# –ú–∞—î –±—É—Ç–∏: 2 (–Ω–µ 0!)
```

## üìä –û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü—ñ—Å–ª—è –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è —Ä—ñ—à–µ–Ω–Ω—è:
- ‚úÖ **–î–∞–Ω—ñ –ù–ï –≤–∏–¥–∞–ª—è—é—Ç—å—Å—è** –ø—Ä–∏ –±—ñ–ª–¥—ñ
- ‚úÖ **Seed data –æ–Ω–æ–≤–ª—é—î** —ñ—Å–Ω—É—é—á—ñ –∑–∞–ø–∏—Å–∏
- ‚úÖ **–ö–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫—ñ –¥–∞–Ω—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è**
- ‚úÖ **–û–Ω–±–æ—Ä–¥–∏–Ω–≥ –ø—Ä–∞—Ü—é—î** –ø—ñ—Å–ª—è –∫–æ–∂–Ω–æ–≥–æ –¥–µ–ø–ª–æ—é

## üéØ –ù–µ–≥–∞–π–Ω—ñ –¥—ñ—ó

1. **–î–µ–ø–ª–æ–π** –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ–≥–æ –∫–æ–¥—É
2. **–ó–∞–ø—É—Å—Ç–∏—Ç–∏** –±–µ–∑–ø–µ—á–Ω–∏–π seed —Å–∫—Ä–∏–ø—Ç
3. **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏** —â–æ –¥–∞–Ω—ñ –Ω–µ –∑–Ω–∏–∫–∞—é—Ç—å –ø—ñ—Å–ª—è –¥–µ–ø–ª–æ—é
4. **–î–æ–¥–∞—Ç–∏** –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ backups

**–¶–µ –º–∞—î –æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤–∏—Ä—ñ—à–∏—Ç–∏ –ø—Ä–æ–±–ª–µ–º—É —Å–∫–∏–¥–∞–Ω–Ω—è –±–∞–∑–∏!**